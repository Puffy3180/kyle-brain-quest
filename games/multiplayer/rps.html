<!DOCTYPE html>
<html>
<head>
    <title>RPS Battle (2P)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; overflow: hidden; background: #dfe6e9; color: #2d3436; font-family: 'Space Grotesk', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
        .ui { display: flex; justify-content: space-between; width: 80%; font-size: 2rem; }
        .player-zone { width: 40%; text-align: center; padding: 20px; border-radius: 20px; background: #fff; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .choice { font-size: 5rem; margin: 20px 0; min-height: 100px; }
        .keys { font-size: 1.2rem; color: #636e72; }
        #result { font-size: 3rem; margin: 40px 0; font-weight: bold; height: 50px; }
        .score { font-size: 2rem; color: #0984e3; }
        .back-btn { position: absolute; bottom: 20px; color: #636e72; text-decoration: none; }
    </style>
</head>
<body>
    <div id="result">READY?</div>

    <div class="ui">
        <div class="player-zone" id="p1-zone">
            <h2>P1</h2>
            <div class="choice" id="p1-choice">?</div>
            <div class="score" id="p1-score">0</div>
            <div class="keys">A: Rock<br>S: Paper<br>D: Scissors</div>
        </div>

        <div class="player-zone" id="p2-zone">
            <h2>P2</h2>
            <div class="choice" id="p2-choice">?</div>
            <div class="score" id="p2-score">0</div>
            <div class="keys">‚Üê Rock<br>‚Üì Paper<br>‚Üí Scissors</div>
        </div>
    </div>

    <a href="../../index.html" class="back-btn">Exit</a>

    <script>
        let p1Score = 0;
        let p2Score = 0;
        let p1Choice = null;
        let p2Choice = null;
        let locked = false;

        const choices = {
            'KeyA': 'ü™®', 'KeyS': 'üìÑ', 'KeyD': '‚úÇÔ∏è',
            'ArrowLeft': 'ü™®', 'ArrowDown': 'üìÑ', 'ArrowRight': '‚úÇÔ∏è'
        };

        const map = { 'ü™®': 'rock', 'üìÑ': 'paper', '‚úÇÔ∏è': 'scissors' };

        document.addEventListener('keydown', e => {
            if (locked) {
                if(e.code === 'Space') resetRound();
                return;
            }

            if (['KeyA', 'KeyS', 'KeyD'].includes(e.code) && !p1Choice) {
                p1Choice = choices[e.code];
                document.getElementById('p1-choice').innerText = "‚úîÔ∏è";
            }

            if (['ArrowLeft', 'ArrowDown', 'ArrowRight'].includes(e.code) && !p2Choice) {
                p2Choice = choices[e.code];
                document.getElementById('p2-choice').innerText = "‚úîÔ∏è";
            }

            if (p1Choice && p2Choice) {
                resolve();
            }
        });

        function resolve() {
            locked = true;
            document.getElementById('p1-choice').innerText = p1Choice;
            document.getElementById('p2-choice').innerText = p2Choice;

            const c1 = map[p1Choice];
            const c2 = map[p2Choice];
            let msg = "";

            if (c1 === c2) {
                msg = "DRAW!";
            } else if (
                (c1 === 'rock' && c2 === 'scissors') ||
                (c1 === 'paper' && c2 === 'rock') ||
                (c1 === 'scissors' && c2 === 'paper')
            ) {
                msg = "P1 WINS!";
                p1Score++;
            } else {
                msg = "P2 WINS!";
                p2Score++;
            }

            document.getElementById('result').innerText = msg;
            document.getElementById('p1-score').innerText = p1Score;
            document.getElementById('p2-score').innerText = p2Score;
            
            setTimeout(() => {
                document.getElementById('result').innerText += " (Space to Reset)";
            }, 500);
        }

        function resetRound() {
            p1Choice = null;
            p2Choice = null;
            locked = false;
            document.getElementById('p1-choice').innerText = "?";
            document.getElementById('p2-choice').innerText = "?";
            document.getElementById('result').innerText = "FIGHT!";
        }
    </script>
</body>
</html>
