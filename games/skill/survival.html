<!DOCTYPE html>
<html>
<head>
    <title>Survival</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; overflow: hidden; background: #000; color: #fff; font-family: 'Space Grotesk', sans-serif; cursor: none; }
        #game-container { position: relative; width: 100vw; height: 100vh; }
        #safe-zone {
            position: absolute; border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #00ff00;
            box-shadow: 0 0 20px #00ff00, inset 0 0 20px #00ff00;
            display: flex; justify-content: center; align-items: center;
            pointer-events: none;
            transition: width 0.1s, height 0.1s;
        }
        #cursor-trail { position: absolute; width: 10px; height: 10px; background: white; border-radius: 50%; pointer-events: none; transform: translate(-50%, -50%); box-shadow: 0 0 10px white; }
        #status { position: fixed; top: 40px; left: 0; width: 100%; text-align: center; pointer-events: none; z-index: 10; mix-blend-mode: difference; }
        h1 { margin: 0; font-size: 32px; text-transform: uppercase; letter-spacing: 5px; font-weight: 700; }
        p { color: #aaa; margin: 5px 0 0; font-weight: 300; }
        #game-over {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 0, 0, 0.9);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.2s;
            z-index: 100;
        }
        #game-over.visible { opacity: 1; pointer-events: auto; cursor: default; }
        button { padding: 15px 40px; font-size: 18px; border: none; background: white; cursor: pointer; border-radius: 50px; margin-top: 20px; font-family: 'Space Grotesk', sans-serif; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; transition: transform 0.2s; }
        button:hover { transform: scale(1.05); }
        .back-link { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); color: rgba(255,255,255,0.3); text-decoration: none; z-index: 20; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; }
        .back-link:hover { color: white; }
    </style>
</head>
<body>
    <div id="status">
        <h1 id="score">0</h1>
        <p>STAY INSIDE THE CIRCLE</p>
    </div>

    <div id="game-container">
        <div id="safe-zone" style="width: 300px; height: 300px;"></div>
        <div id="cursor-trail"></div>
    </div>

    <div id="game-over">
        <h1 style="font-size: 80px; margin-bottom: 0;">DEAD</h1>
        <p id="final-score" style="color: white; font-size: 20px;">Score: 0</p>
        <button onclick="startGame()">Try Again</button>
        <a href="../../index.html" style="margin-top: 30px; color: rgba(255,255,255,0.8); text-decoration: none;">Exit</a>
    </div>

    <a href="../../index.html" class="back-link">Return to Safety</a>

    <script>
        const safeZone = document.getElementById('safe-zone');
        const cursorTrail = document.getElementById('cursor-trail');
        const scoreEl = document.getElementById('score');
        const gameOverScreen = document.getElementById('game-over');
        const finalScoreEl = document.getElementById('final-score');

        let isPlaying = false;
        let score = 0;
        let mouseX = window.innerWidth / 2;
        let mouseY = window.innerHeight / 2;
        
        // Game State
        let zone = { x: 0, y: 0, r: 150, dx: 0, dy: 0 };
        let speed = 2;
        let animationId;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            cursorTrail.style.left = mouseX + 'px';
            cursorTrail.style.top = mouseY + 'px';
        });

        function startGame() {
            isPlaying = true;
            score = 0;
            speed = 3; 
            zone.r = 200;
            zone.x = window.innerWidth / 2;
            zone.y = window.innerHeight / 2;
            
            // Random initial direction
            zone.dx = (Math.random() - 0.5) * speed * 2;
            zone.dy = (Math.random() - 0.5) * speed * 2;

            gameOverScreen.classList.remove('visible');
            update();
        }

        function update() {
            if (!isPlaying) return;

            score++;
            scoreEl.textContent = score;

            // Move Zone
            zone.x += zone.dx;
            zone.y += zone.dy;

            // Bounce off walls
            if (zone.x - zone.r < 0 || zone.x + zone.r > window.innerWidth) zone.dx *= -1;
            if (zone.y - zone.r < 0 || zone.y + zone.r > window.innerHeight) zone.dy *= -1;

            // Erratic movement: Randomly change direction slightly
            if (Math.random() < 0.05) {
                zone.dx += (Math.random() - 0.5) * 4;
                zone.dy += (Math.random() - 0.5) * 4;
                
                // Cap speed
                const currentSpeed = Math.sqrt(zone.dx*zone.dx + zone.dy*zone.dy);
                if (currentSpeed > speed * 1.5) {
                    zone.dx = (zone.dx / currentSpeed) * speed;
                    zone.dy = (zone.dy / currentSpeed) * speed;
                }
            }

            // Difficulty ramping
            if (score % 200 === 0) {
                speed += 0.8; // Increased ramp up
                if (zone.r > 60) zone.r -= 15; // Faster shrink
            }

            // More aggressive erratic movement
            if (Math.random() < 0.08) { // Increased chance
                zone.dx += (Math.random() - 0.5) * 8; // Stronger jitter
                zone.dy += (Math.random() - 0.5) * 8;
                
                // Cap speed
                const currentSpeed = Math.sqrt(zone.dx*zone.dx + zone.dy*zone.dy);
                if (currentSpeed > speed * 2.0) { // Allow higher burst speed
                    zone.dx = (zone.dx / currentSpeed) * speed;
                    zone.dy = (zone.dy / currentSpeed) * speed;
                }
            }

            // Update DOM
            safeZone.style.width = (zone.r * 2) + 'px';
            safeZone.style.height = (zone.r * 2) + 'px';
            safeZone.style.left = (zone.x - zone.r) + 'px';
            safeZone.style.top = (zone.y - zone.r) + 'px';

            // Check Collision
            const dx = mouseX - zone.x;
            const dy = mouseY - zone.y;
            const distance = Math.sqrt(dx*dx + dy*dy);

            // Give a tiny buffer (5px) so it doesn't feel unfair
            if (distance > zone.r + 5) {
                gameOver();
            }

            animationId = requestAnimationFrame(update);
        }

        function gameOver() {
            isPlaying = false;
            cancelAnimationFrame(animationId);
            finalScoreEl.textContent = `You survived for ${score} ticks`;
            gameOverScreen.classList.add('visible');
        }

        // Initialize center pos
        zone.x = window.innerWidth / 2;
        zone.y = window.innerHeight / 2;
        safeZone.style.left = (zone.x - zone.r) + 'px';
        safeZone.style.top = (zone.y - zone.r) + 'px';

        // Start automatically on click first time
        document.body.addEventListener('click', () => {
            if(!isPlaying && !gameOverScreen.classList.contains('visible')) startGame();
        }, { once: true });
        
        // Show start prompt
        scoreEl.textContent = "CLICK TO START";
    </script>
</body>
</html>

